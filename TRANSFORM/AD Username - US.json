{
  "id": "d9d43f9b-f331-4189-ac79-1ab10b49dcbc",
  "name": "AD Username - US",
  "type": "firstValid",
  "attributes": {
    "values": [
      {
        "attributes": {
          "attributeName": "sAMAccountName",
          "sourceName": "US Active Directory"
        },
        "type": "accountAttribute"
      },
      {
        "attributes": {
          "values": [
            {
              "type": "upper",
              "attributes": {
                "input": {
                  "attributes": {
                    "input": {
                      "attributes": {
                        "input": {
                          "type": "decomposeDiacriticalMarks",
                          "attributes": {
                            "input": {
                              "type": "accountAttribute",
                              "attributes": {
                                "sourceName": "Oracle HCM Employees",
                                "attributeName": "FIRST_NAME"
                              }
                            }
                          }
                        },
                        "regex": "[^a-zA-Z]",
                        "replacement": ""
                      },
                      "type": "replace"
                    },
                    "end": 1,
                    "begin": -1
                  },
                  "type": "substring"
                }
              }
            },
            {
              "type": "firstValid",
              "attributes": {
                "values": [
                  {
                    "type": "upper",
                    "attributes": {
                      "input": {
                        "attributes": {
                          "input": {
                            "attributes": {
                              "input": {
                                "type": "decomposeDiacriticalMarks",
                                "attributes": {
                                  "input": {
                                    "attributes": {
                                      "input": {
                                        "type": "accountAttribute",
                                        "attributes": {
                                          "sourceName": "Oracle HCM Employees",
                                          "attributeName": "FIRST_NAME"
                                        }
                                      },
                                      "delimiter": " ",
                                      "index": 1,
                                      "throws": true
                                    },
                                    "type": "split"
                                  }
                                }
                              },
                              "regex": "[^a-zA-Z]",
                              "replacement": ""
                            },
                            "type": "replace"
                          },
                          "end": 1,
                          "begin": -1
                        },
                        "type": "substring"
                      }
                    }
                  },
                  {
                    "type": "upper",
                    "attributes": {
                      "input": {
                        "attributes": {
                          "input": {
                            "attributes": {
                              "input": {
                                "type": "decomposeDiacriticalMarks",
                                "attributes": {
                                  "input": {
                                    "type": "accountAttribute",
                                    "attributes": {
                                      "sourceName": "Oracle HCM Employees",
                                      "attributeName": "FIRST_NAME"
                                    }
                                  }
                                }
                              },
                              "regex": "[^a-zA-Z]",
                              "replacement": ""
                            },
                            "type": "replace"
                          },
                          "end": 1,
                          "begin": -1
                        },
                        "type": "substring"
                      }
                    }
                  },
                  ""
                ]
              }
            },
            {
              "attributes": {
                "input": {
                  "type": "static",
                  "attributes": {
                    "last_name": {
                      "type": "rightPad",
                      "attributes": {
                        "padding": {
                          "type": "rule",
                          "attributes": {
                            "name": "Cloud Services Deployment Utility",
                            "operation": "getEndOfString",
                            "numChars": "1",
                            "input": {
                              "attributes": {
                                "input": {
                                  "type": "decomposeDiacriticalMarks",
                                  "attributes": {
                                    "input": {
                                      "type": "accountAttribute",
                                      "attributes": {
                                        "sourceName": "Oracle HCM Employees",
                                        "attributeName": "LAST_NAME"
                                      }
                                    }
                                  }
                                },
                                "regex": "[^a-zA-Z]",
                                "replacement": ""
                              },
                              "type": "replace"
                            }
                          }
                        },
                        "length": "4",
                        "input": {
                          "attributes": {
                            "input": {
                              "type": "decomposeDiacriticalMarks",
                              "attributes": {
                                "input": {
                                  "type": "accountAttribute",
                                  "attributes": {
                                    "sourceName": "Oracle HCM Employees",
                                    "attributeName": "LAST_NAME"
                                  }
                                }
                              }
                            },
                            "regex": "[^a-zA-Z]",
                            "replacement": ""
                          },
                          "type": "replace"
                        }
                      }
                    },
                    "value": "#if($last_name.length() <= 4)$last_name.toUpperCase()#{else}$last_name.substring(0,4).toUpperCase()#end"
                  }
                },
                "regex": "[^a-zA-Z]",
                "replacement": ""
              },
              "type": "replace"
            }
          ]
        },
        "type": "concat"
      }
    ]
  },
  "internal": false
}